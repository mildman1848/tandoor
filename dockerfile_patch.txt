
# Download and manually fix requirements.txt
RUN     echo "**** download Tandoor Recipes ****" &&     curl -o /tmp/tandoor.tar.gz -L         "https://github.com/TandoorRecipes/recipes/archive/refs/tags/\.tar.gz" &&     tar xf /tmp/tandoor.tar.gz -C /app --strip-components=1 &&     echo "**** fix requirements.txt ****" &&     sed -i '/# Development/,\' /app/requirements.txt &&     sed -i '/python-ldap/d' /app/requirements.txt &&     sed -i '/ldap/d' /app/requirements.txt &&     echo "**** install Python dependencies ****" &&     python -m venv /app/venv &&     /app/venv/bin/python -m pip install --upgrade pip &&     /app/venv/bin/pip install wheel==0.45.1 &&     /app/venv/bin/pip install setuptools_rust==1.10.2 &&     /app/venv/bin/pip install -r /app/requirements.txt --no-cache-dir &&     echo "**** configure nginx ****" &&     rm -rf /etc/nginx/http.d &&     ln -s /app/http.d /etc/nginx/http.d &&     ln -sf /dev/stdout /var/log/nginx/access.log &&     ln -sf /dev/stderr /var/log/nginx/error.log &&     echo "**** collect version information ****" &&     /app/venv/bin/python /app/version.py &&     echo "**** cleanup ****" &&     find /app -type d -name ".git" | xargs rm -rf &&     rm -rf         /tmp/*         /root/.cache         /root/.cargo
